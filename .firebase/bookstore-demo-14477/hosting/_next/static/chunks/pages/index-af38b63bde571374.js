(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(6616)}])},5677:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var o in t)Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}(t,{noSSR:function(){return l},default:function(){return i}});let r=o(8754),n=(o(7294),r._(o(8976)));function a(e){return{default:(null==e?void 0:e.default)||e}}function l(e,t){return delete t.webpack,delete t.modules,e(t)}function i(e,t){let o=n.default,r={loading:e=>{let{error:t,isLoading:o,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e}),r={...r,...t};let i=r.loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?o({...r,loader:()=>null!=i?i().then(a):Promise.resolve(a(()=>null))}):(delete r.webpack,delete r.modules,l(o,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2254:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return a}});let r=o(8754),n=r._(o(7294)),a=n.default.createContext(null)},8976:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});let r=o(8754),n=r._(o(7294)),a=o(2254),l=[],i=[],s=!1;function u(e){let t=e(),o={loading:!0,loaded:null,error:null};return o.promise=t.then(e=>(o.loading=!1,o.loaded=e,e)).catch(e=>{throw o.loading=!1,o.error=e,e}),o}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function c(e){return function(e,t){let o=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),r=null;function l(){if(!r){let t=new d(e,o);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!s){let e=o.webpack?o.webpack():o.modules;e&&i.push(t=>{for(let o of e)if(t.includes(o))return l()})}function u(e,t){!function(){l();let e=n.default.useContext(a.LoadableContext);e&&Array.isArray(o.modules)&&o.modules.forEach(t=>{e(t)})}();let i=n.default.useSyncExternalStore(r.subscribe,r.getCurrentValue,r.getCurrentValue);return n.default.useImperativeHandle(t,()=>({retry:r.retry}),[]),n.default.useMemo(()=>{var t;return i.loading||i.error?n.default.createElement(o.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:r.retry}):i.loaded?n.default.createElement((t=i.loaded)&&t.default?t.default:t,e):null},[e,i])}return u.preload=()=>l(),u.displayName="LoadableComponent",n.default.forwardRef(u)}(u,e)}function f(e,t){let o=[];for(;e.length;){let r=e.pop();o.push(r(t))}return Promise.all(o).then(()=>{if(e.length)return f(e,t)})}c.preloadAll=()=>new Promise((e,t)=>{f(l).then(e,t)}),c.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let o=()=>(s=!0,t());f(i,e).then(o,o)})),window.__NEXT_PRELOADREADY=c.preloadReady;let h=c},6616:function(e,t,o){"use strict";o.r(t),o.d(t,{__N_SSP:function(){return c},default:function(){return f}});var r=o(5893),n=o(7294),a=o(1649),l=o(5152),i=o.n(l),s=o(4337),u=o(8250);let d=i()(()=>o.e(175).then(o.bind(o,7175)),{loadableGenerated:{webpack:()=>[7175]}});var c=!0;function f(e){let[t,o]=(0,n.useState)([]),l=(0,a.I0)(),i=(0,a.v9)(e=>e.book),c=i.books;return(0,n.useEffect)(()=>{l((0,u.qT)()).then(()=>o(c)).catch(e=>console.error(e))},[l]),(0,n.useEffect)(()=>{o(e.books)},[]),(0,r.jsx)(s.Z,{children:(0,r.jsx)(d,{books:c})})}},4337:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var r=o(5893),n=o(1664),a=o.n(n),l=o(5646),i=o.n(l),s=function(){return(0,r.jsxs)("header",{className:i().header,children:[(0,r.jsx)("div",{className:i().logo,children:"Bookstore"}),(0,r.jsx)("nav",{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/",children:"All Books"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/new-book",children:"Add New Book"})})]})})]})},u=o(8150),d=o.n(u);function c(e){let{children:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(s,{}),(0,r.jsx)("main",{className:d().main,children:t})]})}},8250:function(e,t,o){"use strict";o.d(t,{j6:function(){return c},Y5:function(){return f},iy:function(){return h},qT:function(){return d}});var r=o(3977),n=o(1019),a=o(3454);let l={apiKey:'"AIzaSyB_EvHBsePdqQccxgQ8KaObqLha3Azpn8w",',authDomain:'"bookstore-demo-14477.firebaseapp.com",',databaseURL:"https://bookstore-demo-14477-default-rtdb.firebaseio.com",projectId:'"bookstore-demo-14477",',storageBucket:'"bookstore-demo-14477.appspot.com",',messagingSenderId:'"185731773455",',appId:"1:185731773455:web:f036c3eceb13242e19df7a",measurementId:a.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},i=(0,r.ZF)(l),s=(0,n.N8)(i);var u=o(3290);let d=()=>async e=>{let t=async()=>{let e=await fetch("https://bookstore-demo-14477-default-rtdb.firebaseio.com/books.json");if(!e.ok)throw Error("Could not fetch book data.");let t=await e.json();return t};try{let o=[],r=await t();for(let e in r)o.push({id:e,title:r[e].title,author:r[e].author,category:r[e].category,price:r[e].price,description:r[e].description});e(u.y.loadBooks({books:o||[]}))}catch(e){console.error("Your request failed: ",e)}},c=e=>async t=>{let o=async()=>{let t=await fetch("https://bookstore-demo-14477-default-rtdb.firebaseio.com/books.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"Application/json"}});if(!t.ok)throw Error("Could not add book data.");let o=await t.json();return o};try{await o(),t(u.y.addBook())}catch(e){console.error("Your request failed: ",e)}},f=e=>async t=>{try{await (0,n.Od)((0,n.iH)(s,"books/"+e)),t(u.y.deleteBook())}catch(e){console.error("Your request failed: ",e)}},h=(e,t)=>async o=>{try{let{title:r,author:a,category:l,price:i,description:d}=t;await (0,n.Vx)((0,n.iH)(s,"books/"+e),{title:r,author:a,category:l,price:i,description:d}),o(u.y.editBook())}catch(e){console.error("Your request failed: ",e)}}},8150:function(e){e.exports={main:"layout_main___m7vl"}},5646:function(e){e.exports={header:"main-navigation_header__DV_3N",logo:"main-navigation_logo__EWdiJ",active:"main-navigation_active__M_4oO"}},5152:function(e,t,o){e.exports=o(5677)}},function(e){e.O(0,[627,287,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);